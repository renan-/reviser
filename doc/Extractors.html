<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Extractors
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Extractors.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">Extractors</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Extractors
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="Extractor.html" title="Extractor (class)">Extractor</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/extractors.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The module contains all methods to uncompress a archive  regardless the
format.</p>

<p>To add a new format, maybe you need to install the Gem. Find a Gem which
uncompress a specified format on rubygems.org. Add the line “gem
&lt;gem&gt;” in the Gemfile and execute “bundle install” Next, you have to
require the gem: “require &lt;gem&gt;” in the header of this file.</p>

<p>Now, you can right the method corresponding to the format. The name of the
method corresponds to the format. For example, if you to use rar format,
the name of the method will be: “rar” the header of method looks like the
following block:</p>

<pre class="code ruby"><code class="ruby">		def &lt;format&gt; (src, destination)</code></pre>

<p>… 		end</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gz-instance_method" title="#gz (instance method)">- (Object) <strong>gz</strong>(tarfile, destination) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Method which ungzip a file gzip format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tar-instance_method" title="#tar (instance method)">- (Object) <strong>tar</strong>(src, destination) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Method which untar a file tar format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zip-instance_method" title="#zip (instance method)">- (Object) <strong>zip</strong>(src, destination) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Method which unzip a file.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="gz-instance_method">
  
    - (<tt>Object</tt>) <strong>gz</strong>(tarfile, destination) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Method which ungzip a file gzip format</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/extractors.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gz'>gz</span> <span class='lparen'>(</span><span class='id identifier rubyid_tarfile'>tarfile</span><span class='comma'>,</span><span class='id identifier rubyid_destination'>destination</span><span class='rparen'>)</span>
  	<span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipReader</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_tarfile'>tarfile</span><span class='rparen'>)</span>
  	<span class='id identifier rubyid_unzipped'>unzipped</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
  	<span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
  	<span class='id identifier rubyid_tar'>tar</span><span class='lparen'>(</span><span class='id identifier rubyid_unzipped'>unzipped</span><span class='comma'>,</span> <span class='id identifier rubyid_destination'>destination</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tar-instance_method">
  
    - (<tt>Object</tt>) <strong>tar</strong>(src, destination) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Method which untar a file tar format</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/extractors.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tar'>tar</span> <span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='comma'>,</span><span class='id identifier rubyid_destination'>destination</span><span class='rparen'>)</span>
  	<span class='comment'># test if src is String (filename) or IO stream
</span>  	<span class='kw'>if</span> <span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  		<span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='rparen'>)</span>
  	<span class='kw'>else</span>
  		<span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='id identifier rubyid_src'>src</span>
  	<span class='kw'>end</span>

  	<span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TarReader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tar'>tar</span><span class='op'>|</span>
       <span class='id identifier rubyid_tar'>tar</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tarfile'>tarfile</span><span class='op'>|</span>
         	<span class='id identifier rubyid_destination_file'>destination_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_destination'>destination</span><span class='comma'>,</span> <span class='id identifier rubyid_tarfile'>tarfile</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span>
         	<span class='kw'>if</span> <span class='id identifier rubyid_tarfile'>tarfile</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
           	<span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_destination_file'>destination_file</span>
		<span class='kw'>else</span>
            <span class='id identifier rubyid_destination_directory'>destination_directory</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_file'>destination_file</span><span class='rparen'>)</span>
            <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_destination_directory'>destination_directory</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span><span class='lparen'>(</span><span class='id identifier rubyid_destination_directory'>destination_directory</span><span class='rparen'>)</span>
            <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_destination_file'>destination_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
              	<span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_tarfile'>tarfile</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
          	<span class='kw'>end</span>
    		<span class='kw'>end</span>
 		<span class='kw'>end</span>
		<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zip-instance_method">
  
    - (<tt>Object</tt>) <strong>zip</strong>(src, destination) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Method which unzip a file. ZIP format</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/extractors.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_zip'>zip</span> <span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='comma'>,</span> <span class='id identifier rubyid_destination'>destination</span><span class='rparen'>)</span>
	<span class='comment'># Config the gem
</span>	<span class='const'>Zip</span><span class='period'>.</span><span class='id identifier rubyid_on_exists_proc'>on_exists_proc</span> <span class='op'>=</span> <span class='kw'>true</span>
	<span class='const'>Zip</span><span class='period'>.</span><span class='id identifier rubyid_continue_on_exists_proc'>continue_on_exists_proc</span> <span class='op'>=</span> <span class='kw'>true</span>

	<span class='const'>Zip</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_zip_file'>zip_file</span><span class='op'>|</span>
		<span class='comment'>#Entry = file or directory
</span>  		<span class='id identifier rubyid_zip_file'>zip_file</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
 				<span class='comment'>#Create filepath
</span>				<span class='id identifier rubyid_filepath'>filepath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_destination'>destination</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  			<span class='comment'># Check if it doesn&#39;t exist because of directories (overwrite)
</span> 				<span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_filepath'>filepath</span><span class='rparen'>)</span>
 					<span class='comment'># Create directories to access file
</span>					<span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_filepath'>filepath</span><span class='rparen'>)</span><span class='rparen'>)</span>
  					<span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_extract'>extract</span><span class='lparen'>(</span><span class='id identifier rubyid_filepath'>filepath</span><span class='rparen'>)</span> 
   			<span class='kw'>end</span>
 			<span class='kw'>end</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jan  8 19:14:13 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.3).
</div>

  </body>
</html>